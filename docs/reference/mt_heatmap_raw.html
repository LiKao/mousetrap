<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Creates high-resolution heatmap of trajectory data. — mt_heatmap_raw • mousetrap</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Creates high-resolution heatmap of trajectory data. — mt_heatmap_raw" />
<meta property="og:description" content="mt_heatmap_raw creates a high-resolution heatmap image of the 
trajectory data using gaussian smoothing. Note that this function has beta
status." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mousetrap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/mousetrap.html">Overview</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pascalkieslich/mousetrap">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates high-resolution heatmap of trajectory data.</h1>
    <small class="dont-index">Source: <a href='https://github.com/pascalkieslich/mousetrap/blob/master/R/heatmap.R'><code>R/heatmap.R</code></a></small>
    <div class="hidden name"><code>mt_heatmap_raw.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>mt_heatmap_raw</code> creates a high-resolution heatmap image of the 
trajectory data using gaussian smoothing. Note that this function has beta
status.</p>
    </div>

    <pre class="usage"><span class='fu'>mt_heatmap_raw</span><span class='op'>(</span>
  <span class='va'>data</span>,
  use <span class='op'>=</span> <span class='st'>"trajectories"</span>,
  dimensions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"xpos"</span>, <span class='st'>"ypos"</span><span class='op'>)</span>,
  variable <span class='op'>=</span> <span class='cn'>NULL</span>,
  bounds <span class='op'>=</span> <span class='cn'>NULL</span>,
  xres <span class='op'>=</span> <span class='fl'>1000</span>,
  upsample <span class='op'>=</span> <span class='fl'>1</span>,
  norm <span class='op'>=</span> <span class='cn'>FALSE</span>,
  colors <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"black"</span>, <span class='st'>"blue"</span>, <span class='st'>"white"</span><span class='op'>)</span>,
  n_shades <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1000</span>, <span class='fl'>1000</span><span class='op'>)</span>,
  smooth_radius <span class='op'>=</span> <span class='fl'>1.5</span>,
  low_pass <span class='op'>=</span> <span class='fl'>200</span>,
  auto_enhance <span class='op'>=</span> <span class='cn'>TRUE</span>,
  mean_image <span class='op'>=</span> <span class='fl'>0.15</span>,
  mean_color <span class='op'>=</span> <span class='fl'>0.25</span>,
  aggregate_lwd <span class='op'>=</span> <span class='fl'>0</span>,
  aggregate_col <span class='op'>=</span> <span class='st'>"black"</span>,
  n_trajectories <span class='op'>=</span> <span class='cn'>NULL</span>,
  seed <span class='op'>=</span> <span class='cn'>NULL</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a mousetrap data object created using one of the mt_import
functions (see <a href='mt_example.html'>mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p></td>
    </tr>
    <tr>
      <th>use</th>
      <td><p>a character string specifying which trajectory data should be
used.</p></td>
    </tr>
    <tr>
      <th>dimensions</th>
      <td><p>a character vector specifying the trajectory variables used
to create the heatmap. The first two entries are used as x and 
y-coordinates, the third, if provided, will be added as color information.</p></td>
    </tr>
    <tr>
      <th>variable</th>
      <td><p>boolean or numeric vector matching the number of trajectories
that if provided will be used as color information. <code>variable</code> is only
considered when <code>length(dimensions) &lt; 3</code>.</p></td>
    </tr>
    <tr>
      <th>bounds</th>
      <td><p>numeric vector specifying the corners (xmin, ymin, xmax, ymax) 
of the plot region. By default (<code>bounds = NULL</code>), bounds are 
determined based on the data input.</p></td>
    </tr>
    <tr>
      <th>xres</th>
      <td><p>an integer specifying the number of pixels along the x-dimension.
An <code>xres</code> of 1000 implies an 1000*N px, where N is determined so that 
the trajectories aspect ratio is preserved (provided the <code>bounds</code> are 
unchanged).</p></td>
    </tr>
    <tr>
      <th>upsample</th>
      <td><p>a numeric value by which the number of points used to 
represent individual trajectories are increased or decreased. Values of 
smaller than one will improve speed but also introduce a certain level of 
granularity.</p></td>
    </tr>
    <tr>
      <th>norm</th>
      <td><p>a logical specifying whether the data should be warped into 
standard space. If <code>norm = TRUE</code>, this overrules <code>bounds</code>.</p></td>
    </tr>
    <tr>
      <th>colors</th>
      <td><p>a character vector specifying two or three colors used to color
the background, the foreground (trajectories), and the values of a third
dimension (if specified).</p></td>
    </tr>
    <tr>
      <th>n_shades</th>
      <td><p>an integer specifying the number of shades for the color 
gradient between the first and second, and the second and third color in 
<code>colors</code>.</p></td>
    </tr>
    <tr>
      <th>smooth_radius</th>
      <td><p>a numeric value specifying the standard deviation of the
gaussian smoothing. If zero, smoothing is omitted.</p></td>
    </tr>
    <tr>
      <th>low_pass</th>
      <td><p>an integer specifying the allowed number of counts per pixel.
This arguments limits the maximum pixel color intensity.</p></td>
    </tr>
    <tr>
      <th>auto_enhance</th>
      <td><p>boolean. If <code>TRUE</code> (the default), the image is 
adjusted so that the mean color intensity matches <code>mean_image</code> and 
<code>mean_color</code>.</p></td>
    </tr>
    <tr>
      <th>mean_image</th>
      <td><p>a numeric value between 0 and 1 specifying the average 
foreground color intensity across the entire image. Defaults to 0.1.</p></td>
    </tr>
    <tr>
      <th>mean_color</th>
      <td><p>a numeric value between 0 and 1 specifying the average 
third dimension's color intensity across the entire image. Defaults to 0.1.
Only relevant if a third dimension is specified in <code>colors</code>.</p></td>
    </tr>
    <tr>
      <th>aggregate_lwd</th>
      <td><p>an integer specifying the width of the aggregate 
trajectory. If <code>aggregate_lwd</code> is 0 (the default), the aggregate 
trajectory is omitted.</p></td>
    </tr>
    <tr>
      <th>aggregate_col</th>
      <td><p>a character value specifying the color of the aggregate 
trajectory.</p></td>
    </tr>
    <tr>
      <th>n_trajectories</th>
      <td><p>an optional integer specifying the number of 
trajectories used to create the image. By default, all trajectories are 
used. If <code>n_trajectories</code> is specified and smaller than the number of 
trajectories in the trajectory array, then <code>n_trajectories</code> are 
randomly sampled.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>an optional integer specifying the seed used for the trajectory 
sampling.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical indicating whether function should report its
progress.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>mt_object_raw</code> containing in a matrix format
  the image's pixel information, the aggregate trajectory, and the colors.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To create the image, <code>mt_heatmap_raw</code> takes the following steps. First, 
the function maps the trajectory points to a pixel space with x ranging from 
1 to xres and y ranging from 1 to xres divided by the ratio of x and y's 
value range. Second, the function counts and normalizes the number of 
trajectory points occupying each of the x,y-pixels to yield image intensities
between 0 and 1. Third, the function smooths the image using an approximative
guassian approach governed by <code>smooth_radius</code>, which controls the 
dispersion of the gaussian smoothing. Fourth, the function automatically 
enhances the image (unless <code>auto_enhance = FALSE</code>) using a non-linear 
transformation in order to yield a desired <code>mean_image</code> intensity. 
Fifth, the function translates the image intensity into color using the 
colors specified in <code>colors</code>. Finally, the function returns the image 
data in a long format containing the x, y, and color information.</p>
<p><code>mt_heatmap_raw</code> also offers the possibility to overlay the heatmap with 
an additional variable, such as for instance velocity, so that both the 
density of mouse trajectories and the information of the additional variable 
are visible. In order to do this, specify a third variable label in 
<code>dimensions</code> and control its appearance using the <code>color</code> and 
<code>mean_color</code> arguments.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
  &amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
  movement trajectories. In M. Schulte-Mecklenbeck, A. Kühberger, &amp; J. G.
  Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145). New York, NY:
  Routledge.</p>
<p>Kieslich, P. J., Henninger, F., Wulff, D. U., Haslbeck, J. M. B., &amp;
  Schulte-Mecklenbeck, M. (2019). Mouse-tracking: A practical guide to
  implementation and analysis. In M. Schulte-Mecklenbeck, A. Kühberger, &amp; J.
  G. Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp.
  111-130). New York, NY: Routledge.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='mt_heatmap.html'>mt_heatmap</a> and  <a href='mt_heatmap_ggplot.html'>mt_heatmap_ggplot</a> for plotting
  trajectory heatmaps.</p>
<p><a href='mt_diffmap.html'>mt_diffmap</a> for plotting trajectory difference-heatmaps.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Dirk U. Wulff</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Pascal J. Kieslich, Dirk U. Wulff, Felix Henninger, Jonas M. B. Haslbeck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


